# About

Пример реализует запуск процесса для получения запросов и нескольких процессов для обработки этих запросов. Используется модуль 'worker_threads'.  

Мастер-процесс выступает в роли Thread-Manager-а, получая запросы от одного потока и раздавая другим.


# Терминология

- WorkerState - состояние процесса.
- Thread - класс-обертка над процессом. Обладает состоянием и передает сообщения.
- ThreadPool - пул процессов. Может запускать действия на свободных процессах.
- IWorkerAction - действие выполняемое процессом. Действия реализуют этот интерфейс и описываются пользователем.
- threadActionRegistry - реестр действий. Каждое действие регистрируется под уникальным идентификатором.


# Принцип действия

Точкой входа мастер-процесса является index.js  
Точка входа подпроцессов - thread-system/worker-entry.js  
  
Каждый процесс обладает своей областью памяти. Общение осуществляется через очередь сообщений.
Для того, чтобы мастер-процесс имел возможность запустить определенное действие на подпроцессе, используется реестр действий (thread-actions/thread-action-registry). Этот модуль используется как мастер-процессом, так и подпроцессами.  
  
Действия добавляются пользователем путем реализации интерфейса IWorkerAction, после чего добавляются в реестр.  
Запуск действий осуществляется через экземпляры классов Thread или ThreadPool. При этом, процессу передается идентификатор действия из реестра и произвольный объект аргументов. В качестве агрументов могут использоваться только Plain-объекты.  
  
Подпроцессы могут отправлять сообщения мастер-процессу, также передавая произвольный объект аргументов.  
  
Жизненный цикл процессов состоит из следующих состояний:
- Initializing - процесс запускается
- Idle - процесс простаивает (свободен)
- Processing - процесс занят выполнением действия
- Disposed - процесс прерван или завершен
